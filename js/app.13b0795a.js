(function(){"use strict";var e={640:function(e,n,l){var t=l(9242),r=l(3396);function a(e,n,l,t,a,o){const s=(0,r.up)("Home");return(0,r.wg)(),(0,r.j4)(s)}var o=l(4827),s=(l(1844),l(5791)),i=(l(6809),l(7188)),u=(l(2064),l(8435)),d=(l(155),l(438)),c=(l(3877),l(7960),l(7113),l(3417)),f=(l(172),l(7139));const m=e=>((0,r.dD)("data-v-4315e952"),e=e(),(0,r.Cn)(),e),p={class:"box"},g=m((()=>(0,r._)("div",{class:"title"},[(0,r._)("span",null,"用户管理")],-1))),h={key:0,class:"hide"},v={class:"banner"},b={class:"nav"},_={class:"left"},y={class:"right"},w={class:"table-box"},x={class:"table"},O=m((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th"),(0,r._)("th",null,"姓名"),(0,r._)("th",null,"年龄"),(0,r._)("th",null,"性别"),(0,r._)("th",null,"联系电话"),(0,r._)("th",null,"详细地址"),(0,r._)("th",null,"操作")])],-1))),S=["onUpdate:modelValue"],k={class:"info"},C={class:"info"},I={class:"info"},N={class:"info phone"},U={class:"info address"},V={class:"control"},W=["onClick"],E=["onClick"],J={class:"del-btn"},j={class:"example-block"},D=m((()=>(0,r._)("span",{class:"example-demonstration"},null,-1))),z={class:"dialog-footer"},A=(0,r.Uk)("关闭"),H=(0,r.Uk)("保存");function q(e,n,l,a,m,q){const F=c.EZ,M=i.nH,R=d.BT,T=d.km,B=u.m,Z=i.ly,P=s.mi,Y=o.d0;return(0,r.wg)(),(0,r.iD)("div",p,[g,a.dialogVisible?((0,r.wg)(),(0,r.iD)("div",h)):(0,r.kq)("",!0),(0,r._)("div",v,[(0,r._)("div",b,[(0,r._)("div",_,[(0,r._)("button",{class:"btn",onClick:n[0]||(n[0]=e=>a.changeUsers(null))},"新建"),(0,r.wy)((0,r._)("input",{class:"search",ref:"refInput","onUpdate:modelValue":n[1]||(n[1]=e=>a.input=e),onFocus:n[2]||(n[2]=e=>a.focus()),onBlur:n[3]||(n[3]=e=>a.blur()),onKeyup:n[4]||(n[4]=(0,t.D2)((e=>a.blur()),["enter"]))},null,544),[[t.nr,a.input]])]),(0,r._)("div",y,[(0,r._)("button",{class:"btn",onClick:n[5]||(n[5]=(...e)=>a.layout&&a.layout(...e))},"撤销")])]),(0,r._)("div",w,[(0,r._)("table",x,[O,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.usersInfoCopy,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e},[(0,r._)("td",null,[(0,r.wy)((0,r._)("input",{type:"checkbox",class:"checkbox","onUpdate:modelValue":n=>e.ischecked=n},null,8,S),[[t.e8,e.ischecked]])]),(0,r._)("td",null,[(0,r._)("span",k,(0,f.zw)(e.name),1)]),(0,r._)("td",null,[(0,r._)("span",C,(0,f.zw)(e.age),1)]),(0,r._)("td",null,[(0,r._)("span",I,(0,f.zw)(e.gender),1)]),(0,r._)("td",null,[(0,r._)("span",N,(0,f.zw)(e.phone),1)]),(0,r._)("td",null,[(0,r._)("span",U,(0,f.zw)(e.address),1)]),(0,r._)("td",null,[(0,r._)("div",V,[(0,r._)("button",{style:{"margin-right":".1rem"},onClick:n=>a.changeUsers(e.id)},"编辑",8,W),(0,r._)("button",{onClick:n=>a.deleteUser(e.id)},"删除",8,E)])])])))),128))])])]),(0,r._)("div",J,[(0,r._)("button",{onClick:n[6]||(n[6]=(...e)=>a.deleteMore&&a.deleteMore(...e))},"批量删除")])]),(0,r.Wm)(Y,{modelValue:a.dialogVisible,"onUpdate:modelValue":n[13]||(n[13]=e=>a.dialogVisible=e),width:"50%","before-close":a.handleClose,"show-close":!1,"close-on-click-modal":!1,modal:!1,title:"新建/编辑用户"},{footer:(0,r.w5)((()=>[(0,r._)("span",z,[(0,r.Wm)(P,{onClick:a.handleClose},{default:(0,r.w5)((()=>[A])),_:1},8,["onClick"]),(0,r.Wm)(P,{type:"primary",style:{"margin-left":"0rem"},onClick:n[12]||(n[12]=e=>a.saveUsers(a.formRef))},{default:(0,r.w5)((()=>[H])),_:1})])])),default:(0,r.w5)((()=>[(0,r._)("span",null,[(0,r.Wm)(Z,{model:a.form,"label-width":"2.4rem",onSubmit:n[11]||(n[11]=(0,t.iM)((()=>{}),["prevent"])),inline:"",size:"large","label-position":"top",rules:a.rules,ref:"formRef"},{default:(0,r.w5)((()=>[(0,r.Wm)(M,{label:"姓名",prop:"name"},{default:(0,r.w5)((()=>[(0,r.Wm)(F,{modelValue:a.form.name,"onUpdate:modelValue":n[7]||(n[7]=e=>a.form.name=e),style:"width:6rem"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(M,{label:"性别",prop:"gender"},{default:(0,r.w5)((()=>[(0,r.Wm)(T,{modelValue:a.form.gender,"onUpdate:modelValue":n[8]||(n[8]=e=>a.form.gender=e),style:"width:6rem"},{default:(0,r.w5)((()=>[(0,r.Wm)(R,{label:"男",value:"男"}),(0,r.Wm)(R,{label:"女",value:"女"})])),_:1},8,["modelValue"])])),_:1}),(0,r.Wm)(M,{label:"联系电话",style:"width:10rem",prop:"phone"},{default:(0,r.w5)((()=>[(0,r.Wm)(F,{modelValue:a.form.phone,"onUpdate:modelValue":n[9]||(n[9]=e=>a.form.phone=e),modelModifiers:{number:!0},style:"width:6rem"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(M,{label:"详细地址",prop:"detailAddress"},{default:(0,r.w5)((()=>[(0,r._)("div",j,[D,(0,r.Wm)(B,{placeholder:"请选择地址",options:a.options,props:a.hover,onChange:a.handleChange},null,8,["options","props","onChange"])]),(0,r.Wm)(F,{modelValue:a.form.detailAddress,"onUpdate:modelValue":n[10]||(n[10]=e=>a.form.detailAddress=e),style:(0,f.j5)("width:7.8rem;margin-left:.8rem;")},null,8,["modelValue","style"])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue","before-close"])])}var F=l(6666),M=(l(8742),l(4870)),R=l(2655),T=l(7178),B={name:"Home",setup(){const e=(0,M.iH)(""),n=(0,M.iH)(!1),l=(0,M.iH)(null),t=(0,M.qj)([{allowDelete:!1,id:1,ischecked:!1,name:"张三",age:18,gender:"男",phone:"xxxxx",address:"xxxxxxxxx"}]),a=(0,M.qj)([]),o=(0,r.Fl)((()=>t.length)),s=(0,M.iH)(-1),i=(0,M.qj)({name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:8,message:"请输入2-8个汉字",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],phone:[{required:!0,message:"请输入电话(11位数字)",trigger:"blur"},{type:"number",message:"请输入电话(11位数字)"}],detailAddress:[{required:!0,message:"请输入地址",trigger:"blur"}]}),u=(0,M.iH)(null),d=(0,M.qj)({name:"",gender:"",phone:"",age:"18",address:"",detailAddress:""});function c(){e.value="按关键字搜索"===e.value?"":e.value}function f(){if((0,r.Y3)((()=>{l.value.blur()})),e.value=""===e.value?"按关键字搜索":e.value,"按关键字搜索"===e.value){a.splice(0);for(let e=0;e<t.length;e++)a.push(t[e])}else a.splice(0),t.forEach((n=>{-1==n.name.indexOf(e.value)&&-1==n.gender.indexOf(e.value)&&-1==String(n.age).indexOf(e.value)&&-1==n.address.indexOf(e.value)||a.push(n)})),0===a.length&&a.push(t[0])}function m(){R.T.confirm("信息尚未保存，是否确认关闭?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{n.value=!1,(0,T.z8)({type:"info",message:"已取消保存"})})).catch((()=>{}))}function p(e){const n=t.findIndex((n=>n.id===e));if(-1!=n){if(!1===t[n].allowDelete)return(0,F.bM)({title:"警告",message:"权限不够，禁止删除!",type:"warning",duration:1e3});x(JSON.stringify(t)),t.splice(n,1),h(),w(JSON.stringify(t))}}function g(){let e=[];t.forEach((n=>{n.ischecked&&e.push(n.id)}));const n=JSON.stringify(t);for(let l=0;l<e.length;l++){const n=t.findIndex((n=>n.id===e[l]));if(!1===t[n].allowDelete)return(0,F.bM)({title:"警告",message:"权限不够，禁止删除张三!",type:"warning",duration:1e3});t.splice(n,1)}x(n),h(),w(JSON.stringify(t))}function h(){let e=1;t.forEach(((n,l)=>{t[l].id=e,e++}))}function v(){const e=JSON.parse(localStorage.getItem("OLDUSERSINFO"));x(JSON.stringify(t)),t.splice(0);for(let n=0;n<e.length;n++)t.push(e[n]);w(JSON.stringify(t))}async function b(){if(u)try{u.value.validate((e=>{if(!e)return!1;{const e=t.findIndex((e=>e.id===s.value));if(-1==e){const e={};e.id=o.value,e.ischecked=!1,e.name=d.name,e.gender=d.gender,e.age=d.age,e.phone=d.phone,e.address=d.address+d.detailAddress;let n=y(e);if(n)return(0,T.z8)("相同信息已存在");e.id=o.value+1,x(JSON.stringify(t)),t.push(e),w(JSON.stringify(t))}else x(JSON.stringify(t)),t[e].name=d.name,t[e].gender=d.gender,t[e].phone=d.phone,t[e].address=d.address+d.detailAddress,w(JSON.stringify(t));n.value=!1,s.value=-1}}))}catch(e){return!1}}function _(e){if(e){const l=t.findIndex((n=>n.id===e));s.value=e,d.name=t[l].name,d.gender=t[l].gender,d.phone=t[l].phone,d.detailAddress=t[l].address,n.value=!0}else d.name="",d.gender="",d.phone="",d.detailAddress="",n.value=!0}function y(e){let n=!1;return t.forEach((l=>{l.name===e.name&&l.address===e.address&&l.phone===e.phone&&(n=!0)})),n}function w(e){localStorage.setItem("NEWUSERSINFO",e)}function x(e){localStorage.setItem("OLDUSERSINFO",e)}const O={expandTrigger:"hover"},S=e=>{let n="";e.forEach((e=>{n+=e})),d.address=n},k=[{value:"广东省",label:"广东省",children:[{value:"广州市",label:"广州市",children:[{value:"番禺区",label:"番禺区"},{value:"越秀区",label:"越秀区"},{value:"海珠区",label:"海珠区"},{value:"天河区",label:"天河区"},{value:"白云区",label:"白云区"},{value:"荔湾区",label:"荔湾区"}]}]}];return(0,r.YP)(t,(()=>{f()})),(0,r.bv)((()=>{if(x(JSON.stringify(t)),localStorage.getItem("NEWUSERSINFO")){const e=JSON.parse(localStorage.getItem("NEWUSERSINFO"));t.splice(0);for(let n=0;n<e.length;n++)t.push(e[n])}w(JSON.stringify(t)),f()})),{input:e,usersInfo:t,dialogVisible:n,form:d,hover:O,options:k,id:o,currentId:s,rules:i,formRef:u,usersInfoCopy:a,refInput:l,focus:c,blur:f,handleClose:m,deleteMore:g,handleChange:S,changeUsers:_,saveUsers:b,deleteUser:p,layout:v}}},Z=l(89);const P=(0,Z.Z)(B,[["render",q],["__scopeId","data-v-4315e952"]]);var Y=P,K={name:"App",components:{Home:Y}};const L=(0,Z.Z)(K,[["render",a]]);var G=L,Q=l(5396);l(2834),l(4478);const X=(0,t.ri)(G);X.mount("#app"),X.use(Q.Z,{size:"small",zIndex:3e3})}},n={};function l(t){var r=n[t];if(void 0!==r)return r.exports;var a=n[t]={exports:{}};return e[t].call(a.exports,a,a.exports,l),a.exports}l.m=e,function(){var e=[];l.O=function(n,t,r,a){if(!t){var o=1/0;for(d=0;d<e.length;d++){t=e[d][0],r=e[d][1],a=e[d][2];for(var s=!0,i=0;i<t.length;i++)(!1&a||o>=a)&&Object.keys(l.O).every((function(e){return l.O[e](t[i])}))?t.splice(i--,1):(s=!1,a<o&&(o=a));if(s){e.splice(d--,1);var u=r();void 0!==u&&(n=u)}}return n}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[t,r,a]}}(),function(){l.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(n,{a:n}),n}}(),function(){l.d=function(e,n){for(var t in n)l.o(n,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};l.O.j=function(n){return 0===e[n]};var n=function(n,t){var r,a,o=t[0],s=t[1],i=t[2],u=0;if(o.some((function(n){return 0!==e[n]}))){for(r in s)l.o(s,r)&&(l.m[r]=s[r]);if(i)var d=i(l)}for(n&&n(t);u<o.length;u++)a=o[u],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(d)},t=self["webpackChunkdemo_crud_users"]=self["webpackChunkdemo_crud_users"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=l.O(void 0,[998],(function(){return l(640)}));t=l.O(t)})();
//# sourceMappingURL=app.13b0795a.js.map