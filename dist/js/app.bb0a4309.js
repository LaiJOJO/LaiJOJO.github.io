(function(){"use strict";var e={1179:function(e,n,l){var t=l(9242),a=l(3396);function o(e,n,l,t,o,r){const s=(0,a.up)("Home");return(0,a.wg)(),(0,a.j4)(s)}var r=l(4827),s=(l(1844),l(5791)),i=(l(6809),l(7188)),d=(l(2064),l(8435)),u=(l(155),l(438)),c=(l(3877),l(7960),l(7113),l(3417)),f=(l(172),l(7139));const p=e=>((0,a.dD)("data-v-7fad594b"),e=e(),(0,a.Cn)(),e),m={class:"box"},g=p((()=>(0,a._)("div",{class:"title"},[(0,a._)("span",null,"用户管理")],-1))),h={key:0,class:"hide"},v={class:"banner"},b={class:"nav"},_={class:"left"},y={class:"right"},x={class:"table-box"},w={class:"table"},O=p((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th"),(0,a._)("th",null,"姓名"),(0,a._)("th",null,"年龄"),(0,a._)("th",null,"性别"),(0,a._)("th",null,"联系电话"),(0,a._)("th",null,"详细地址"),(0,a._)("th",null,"操作")])],-1))),S=["onUpdate:modelValue"],k={class:"info"},C={class:"info"},I={class:"info"},N={class:"info phone"},U={class:"info address"},V={class:"control"},W=["onClick"],E=["onClick"],J={class:"del-btn"},j={class:"example-block"},D=p((()=>(0,a._)("span",{class:"example-demonstration"},null,-1))),z={class:"dialog-footer"},A=(0,a.Uk)("关闭"),H=(0,a.Uk)("保存");function q(e,n,l,o,p,q){const F=c.EZ,M=i.nH,R=u.BT,T=u.km,B=d.m,Z=i.ly,P=s.mi,Y=r.d0;return(0,a.wg)(),(0,a.iD)("div",m,[g,o.dialogVisible?((0,a.wg)(),(0,a.iD)("div",h)):(0,a.kq)("",!0),(0,a._)("div",v,[(0,a._)("div",b,[(0,a._)("div",_,[(0,a._)("button",{class:"btn",onClick:n[0]||(n[0]=e=>o.changeUsers(null))},"新建"),(0,a.wy)((0,a._)("input",{class:"search",ref:"refInput","onUpdate:modelValue":n[1]||(n[1]=e=>o.input=e),onFocus:n[2]||(n[2]=e=>o.focus()),onBlur:n[3]||(n[3]=e=>o.blur()),onKeyup:n[4]||(n[4]=(0,t.D2)((e=>o.blur()),["enter"]))},null,544),[[t.nr,o.input]])]),(0,a._)("div",y,[(0,a._)("button",{class:"btn",onClick:n[5]||(n[5]=(...e)=>o.layout&&o.layout(...e))},"撤销")])]),(0,a._)("div",x,[(0,a._)("table",w,[O,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.usersInfoCopy,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e},[(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"checkbox",class:"checkbox","onUpdate:modelValue":n=>e.ischecked=n},null,8,S),[[t.e8,e.ischecked]])]),(0,a._)("td",null,[(0,a._)("span",k,(0,f.zw)(e.name),1)]),(0,a._)("td",null,[(0,a._)("span",C,(0,f.zw)(e.age),1)]),(0,a._)("td",null,[(0,a._)("span",I,(0,f.zw)(e.gender),1)]),(0,a._)("td",null,[(0,a._)("span",N,(0,f.zw)(e.phone),1)]),(0,a._)("td",null,[(0,a._)("span",U,(0,f.zw)(e.address),1)]),(0,a._)("td",null,[(0,a._)("div",V,[(0,a._)("button",{style:{"margin-right":"5px"},onClick:n=>o.changeUsers(e.id)},"编辑",8,W),(0,a._)("button",{onClick:n=>o.deleteUser(e.id)},"删除",8,E)])])])))),128))])])]),(0,a._)("div",J,[(0,a._)("button",{onClick:n[6]||(n[6]=(...e)=>o.deleteMore&&o.deleteMore(...e))},"批量删除")])]),(0,a.Wm)(Y,{modelValue:o.dialogVisible,"onUpdate:modelValue":n[13]||(n[13]=e=>o.dialogVisible=e),width:"50%","before-close":o.handleClose,"show-close":!1,"close-on-click-modal":!1,modal:!1,title:"新建/编辑用户"},{footer:(0,a.w5)((()=>[(0,a._)("span",z,[(0,a.Wm)(P,{onClick:o.handleClose},{default:(0,a.w5)((()=>[A])),_:1},8,["onClick"]),(0,a.Wm)(P,{type:"primary",style:{"margin-left":"0px"},onClick:n[12]||(n[12]=e=>o.saveUsers(o.formRef))},{default:(0,a.w5)((()=>[H])),_:1})])])),default:(0,a.w5)((()=>[(0,a._)("span",null,[(0,a.Wm)(Z,{model:o.form,"label-width":"120px",onSubmit:n[11]||(n[11]=(0,t.iM)((()=>{}),["prevent"])),inline:"",size:"large","label-position":"top",rules:o.rules,ref:"formRef"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{label:"姓名",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:o.form.name,"onUpdate:modelValue":n[7]||(n[7]=e=>o.form.name=e),style:"width:300px"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(M,{label:"性别",prop:"gender"},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{modelValue:o.form.gender,"onUpdate:modelValue":n[8]||(n[8]=e=>o.form.gender=e),style:"width:300px"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{label:"男",value:"男"}),(0,a.Wm)(R,{label:"女",value:"女"})])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(M,{label:"联系电话",style:"width:500px",prop:"phone"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:o.form.phone,"onUpdate:modelValue":n[9]||(n[9]=e=>o.form.phone=e),modelModifiers:{number:!0},style:"width:300px"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(M,{label:"详细地址",prop:"detailAddress"},{default:(0,a.w5)((()=>[(0,a._)("div",j,[D,(0,a.Wm)(B,{placeholder:"请选择地址",options:o.options,props:o.hover,onChange:o.handleChange},null,8,["options","props","onChange"])]),(0,a.Wm)(F,{modelValue:o.form.detailAddress,"onUpdate:modelValue":n[10]||(n[10]=e=>o.form.detailAddress=e),style:"width:390px;margin-left:40px;"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue","before-close"])])}var F=l(6666),M=(l(8742),l(4870)),R=l(2655),T=l(7178),B={name:"Home",setup(){const e=(0,M.iH)(""),n=(0,M.iH)(!1),l=(0,M.iH)(null),t=(0,M.qj)([{allowDelete:!1,id:1,ischecked:!1,name:"张三",age:18,gender:"男",phone:"xxxxx",address:"xxxxxxxxx"}]),o=(0,M.qj)([]),r=(0,a.Fl)((()=>t.length)),s=(0,M.iH)(-1),i=(0,M.qj)({name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:8,message:"请输入2-8个汉字",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],phone:[{required:!0,message:"请输入电话(11位数字)",trigger:"blur"},{type:"number",message:"请输入电话(11位数字)"}],detailAddress:[{required:!0,message:"请输入地址",trigger:"blur"}]}),d=(0,M.iH)(null),u=(0,M.qj)({name:"",gender:"",phone:"",age:"18",address:"",detailAddress:""});function c(){e.value="按关键字搜索"===e.value?"":e.value}function f(){if((0,a.Y3)((()=>{l.value.blur()})),e.value=""===e.value?"按关键字搜索":e.value,"按关键字搜索"===e.value){o.splice(0);for(let e=0;e<t.length;e++)o.push(t[e])}else o.splice(0),t.forEach((n=>{-1==n.name.indexOf(e.value)&&-1==n.gender.indexOf(e.value)&&-1==String(n.age).indexOf(e.value)&&-1==n.address.indexOf(e.value)||o.push(n)})),0===o.length&&o.push(t[0])}function p(){R.T.confirm("信息尚未保存，是否确认关闭?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{n.value=!1,(0,T.z8)({type:"info",message:"已取消保存"})})).catch((()=>{}))}function m(e){const n=t.findIndex((n=>n.id===e));if(-1!=n){if(!1===t[n].allowDelete)return(0,F.bM)({title:"警告",message:"权限不够，禁止删除!",type:"warning",duration:1e3});w(JSON.stringify(t)),t.splice(n,1),h(),x(JSON.stringify(t))}}function g(){let e=[];t.forEach((n=>{n.ischecked&&e.push(n.id)}));const n=JSON.stringify(t);for(let l=0;l<e.length;l++){const n=t.findIndex((n=>n.id===e[l]));if(!1===t[n].allowDelete)return(0,F.bM)({title:"警告",message:"权限不够，禁止删除张三!",type:"warning",duration:1e3});t.splice(n,1)}w(n),h(),x(JSON.stringify(t))}function h(){let e=1;t.forEach(((n,l)=>{t[l].id=e,e++}))}function v(){const e=JSON.parse(localStorage.getItem("OLDUSERSINFO"));w(JSON.stringify(t)),t.splice(0);for(let n=0;n<e.length;n++)t.push(e[n]);x(JSON.stringify(t))}async function b(){if(d)try{d.value.validate((e=>{if(!e)return!1;{const e=t.findIndex((e=>e.id===s.value));if(-1==e){const e={};e.id=r.value,e.ischecked=!1,e.name=u.name,e.gender=u.gender,e.age=u.age,e.phone=u.phone,e.address=u.address+u.detailAddress;let n=y(e);if(n)return(0,T.z8)("相同信息已存在");e.id=r.value+1,w(JSON.stringify(t)),t.push(e),x(JSON.stringify(t))}else w(JSON.stringify(t)),t[e].name=u.name,t[e].gender=u.gender,t[e].phone=u.phone,t[e].address=u.address+u.detailAddress,x(JSON.stringify(t));n.value=!1,s.value=-1}}))}catch(e){return!1}}function _(e){if(e){const l=t.findIndex((n=>n.id===e));s.value=e,u.name=t[l].name,u.gender=t[l].gender,u.phone=t[l].phone,u.detailAddress=t[l].address,n.value=!0}else u.name="",u.gender="",u.phone="",u.detailAddress="",n.value=!0}function y(e){let n=!1;return t.forEach((l=>{l.name===e.name&&l.address===e.address&&l.phone===e.phone&&(n=!0)})),n}function x(e){localStorage.setItem("NEWUSERSINFO",e)}function w(e){localStorage.setItem("OLDUSERSINFO",e)}const O={expandTrigger:"hover"},S=e=>{let n="";e.forEach((e=>{n+=e})),u.address=n},k=[{value:"广东省",label:"广东省",children:[{value:"广州市",label:"广州市",children:[{value:"番禺区",label:"番禺区"},{value:"越秀区",label:"越秀区"},{value:"海珠区",label:"海珠区"},{value:"天河区",label:"天河区"},{value:"白云区",label:"白云区"},{value:"荔湾区",label:"荔湾区"}]}]}];return(0,a.YP)(t,(()=>{f()})),(0,a.bv)((()=>{if(w(JSON.stringify(t)),localStorage.getItem("NEWUSERSINFO")){const e=JSON.parse(localStorage.getItem("NEWUSERSINFO"));t.splice(0);for(let n=0;n<e.length;n++)t.push(e[n])}x(JSON.stringify(t)),f()})),{input:e,usersInfo:t,dialogVisible:n,form:u,hover:O,options:k,id:r,currentId:s,rules:i,formRef:d,usersInfoCopy:o,refInput:l,focus:c,blur:f,handleClose:p,deleteMore:g,handleChange:S,changeUsers:_,saveUsers:b,deleteUser:m,layout:v}}},Z=l(89);const P=(0,Z.Z)(B,[["render",q],["__scopeId","data-v-7fad594b"]]);var Y=P,K={name:"App",components:{Home:Y}};const L=(0,Z.Z)(K,[["render",o]]);var G=L,Q=l(5396);l(2834),l(4478);const X=(0,t.ri)(G);X.mount("#app"),X.use(Q.Z,{size:"small",zIndex:3e3})}},n={};function l(t){var a=n[t];if(void 0!==a)return a.exports;var o=n[t]={exports:{}};return e[t].call(o.exports,o,o.exports,l),o.exports}l.m=e,function(){var e=[];l.O=function(n,t,a,o){if(!t){var r=1/0;for(u=0;u<e.length;u++){t=e[u][0],a=e[u][1],o=e[u][2];for(var s=!0,i=0;i<t.length;i++)(!1&o||r>=o)&&Object.keys(l.O).every((function(e){return l.O[e](t[i])}))?t.splice(i--,1):(s=!1,o<r&&(r=o));if(s){e.splice(u--,1);var d=a();void 0!==d&&(n=d)}}return n}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[t,a,o]}}(),function(){l.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(n,{a:n}),n}}(),function(){l.d=function(e,n){for(var t in n)l.o(n,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};l.O.j=function(n){return 0===e[n]};var n=function(n,t){var a,o,r=t[0],s=t[1],i=t[2],d=0;if(r.some((function(n){return 0!==e[n]}))){for(a in s)l.o(s,a)&&(l.m[a]=s[a]);if(i)var u=i(l)}for(n&&n(t);d<r.length;d++)o=r[d],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(u)},t=self["webpackChunkdemo_crud_users"]=self["webpackChunkdemo_crud_users"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=l.O(void 0,[998],(function(){return l(1179)}));t=l.O(t)})();
//# sourceMappingURL=app.bb0a4309.js.map