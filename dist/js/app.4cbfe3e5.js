(function(){"use strict";var e={3135:function(e,n,l){var t=l(9242),a=l(3396);function o(e,n,l,t,o,r){const s=(0,a.up)("Home");return(0,a.wg)(),(0,a.j4)(s)}var r=l(4827),s=(l(1844),l(5791)),i=(l(6809),l(7188)),d=(l(2064),l(8435)),u=(l(155),l(438)),c=(l(3877),l(7960),l(7113),l(3417)),f=(l(172),l(7139));const p=e=>((0,a.dD)("data-v-a6668e74"),e=e(),(0,a.Cn)(),e),m={class:"box"},g=p((()=>(0,a._)("div",{class:"title"},[(0,a._)("span",null,"用户管理")],-1))),h={key:0,class:"hide"},v={class:"banner"},b={class:"nav"},_={class:"left"},y={class:"right"},x={class:"table-box"},w={class:"table"},O=p((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th"),(0,a._)("th",null,"姓名"),(0,a._)("th",null,"年龄"),(0,a._)("th",null,"性别"),(0,a._)("th",null,"联系电话"),(0,a._)("th",null,"详细地址"),(0,a._)("th",null,"操作")])],-1))),S=["onUpdate:modelValue"],k={class:"info"},C={class:"info"},N={class:"info"},U={class:"info phone"},V={class:"info address"},I={class:"control"},W=["onClick"],E=["onClick"],J={class:"del-btn"},j={class:"example-block"},z=p((()=>(0,a._)("span",{class:"example-demonstration"},null,-1))),A={class:"dialog-footer"},D=(0,a.Uk)("关闭"),q=(0,a.Uk)("保存");function H(e,n,l,o,p,H){const F=c.EZ,M=i.nH,R=u.BT,T=u.km,B=d.m,Z=i.ly,P=s.mi,L=r.d0;return(0,a.wg)(),(0,a.iD)("div",m,[g,o.dialogVisible?((0,a.wg)(),(0,a.iD)("div",h)):(0,a.kq)("",!0),(0,a._)("div",v,[(0,a._)("div",b,[(0,a._)("div",_,[(0,a._)("button",{class:"btn",onClick:n[0]||(n[0]=e=>o.changeUsers(null))},"新建"),(0,a.wy)((0,a._)("input",{class:"search","onUpdate:modelValue":n[1]||(n[1]=e=>o.input=e),onFocus:n[2]||(n[2]=e=>o.focus()),onBlur:n[3]||(n[3]=e=>o.blur())},null,544),[[t.nr,o.input]])]),(0,a._)("div",y,[(0,a._)("button",{class:"btn",onClick:n[4]||(n[4]=(...e)=>o.layout&&o.layout(...e))},"撤销")])]),(0,a._)("div",x,[(0,a._)("table",w,[O,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.usersInfoCopy,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e},[(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"checkbox",class:"checkbox","onUpdate:modelValue":n=>e.ischecked=n},null,8,S),[[t.e8,e.ischecked]])]),(0,a._)("td",null,[(0,a._)("span",k,(0,f.zw)(e.name),1)]),(0,a._)("td",null,[(0,a._)("span",C,(0,f.zw)(e.age),1)]),(0,a._)("td",null,[(0,a._)("span",N,(0,f.zw)(e.gender),1)]),(0,a._)("td",null,[(0,a._)("span",U,(0,f.zw)(e.phone),1)]),(0,a._)("td",null,[(0,a._)("span",V,(0,f.zw)(e.address),1)]),(0,a._)("td",null,[(0,a._)("div",I,[(0,a._)("button",{style:{"margin-right":"5px"},onClick:n=>o.changeUsers(e.id)},"编辑",8,W),(0,a._)("button",{onClick:n=>o.deleteUser(e.id)},"删除",8,E)])])])))),128))])])]),(0,a._)("div",J,[(0,a._)("button",{onClick:n[5]||(n[5]=(...e)=>o.deleteMore&&o.deleteMore(...e))},"批量删除")])]),(0,a.Wm)(L,{modelValue:o.dialogVisible,"onUpdate:modelValue":n[12]||(n[12]=e=>o.dialogVisible=e),width:"50%","before-close":o.handleClose,"show-close":!1,"close-on-click-modal":!1,modal:!1,title:"新建/编辑用户"},{footer:(0,a.w5)((()=>[(0,a._)("span",A,[(0,a.Wm)(P,{onClick:o.handleClose},{default:(0,a.w5)((()=>[D])),_:1},8,["onClick"]),(0,a.Wm)(P,{type:"primary",style:{"margin-left":"0px"},onClick:n[11]||(n[11]=e=>o.saveUsers(o.formRef))},{default:(0,a.w5)((()=>[q])),_:1})])])),default:(0,a.w5)((()=>[(0,a._)("span",null,[(0,a.Wm)(Z,{model:o.form,"label-width":"120px",onSubmit:n[10]||(n[10]=(0,t.iM)((()=>{}),["prevent"])),inline:"",size:"large","label-position":"top",rules:o.rules,ref:"formRef"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{label:"姓名",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:o.form.name,"onUpdate:modelValue":n[6]||(n[6]=e=>o.form.name=e),style:"width:300px"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(M,{label:"性别",prop:"gender"},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{modelValue:o.form.gender,"onUpdate:modelValue":n[7]||(n[7]=e=>o.form.gender=e),style:"width:300px"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{label:"男",value:"男"}),(0,a.Wm)(R,{label:"女",value:"女"})])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(M,{label:"联系电话",style:"width:500px",prop:"phone"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:o.form.phone,"onUpdate:modelValue":n[8]||(n[8]=e=>o.form.phone=e),modelModifiers:{number:!0},style:"width:300px"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(M,{label:"详细地址",prop:"detailAddress"},{default:(0,a.w5)((()=>[(0,a._)("div",j,[z,(0,a.Wm)(B,{placeholder:"请选择地址",options:o.options,props:o.hover,onChange:o.handleChange},null,8,["options","props","onChange"])]),(0,a.Wm)(F,{modelValue:o.form.detailAddress,"onUpdate:modelValue":n[9]||(n[9]=e=>o.form.detailAddress=e),style:"width:390px;margin-left:40px;"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue","before-close"])])}var F=l(6666),M=(l(8742),l(4870)),R=l(2655),T=l(7178),B={name:"Home",setup(){const e=(0,M.iH)(""),n=(0,M.iH)(!1),l=(0,M.qj)([{allowDelete:!1,id:1,ischecked:!1,name:"张三",age:18,gender:"男",phone:"xxxxx",address:"xxxxxxxxx"}]),t=(0,M.qj)([]),o=(0,a.Fl)((()=>l.length)),r=(0,M.iH)(-1),s=(0,M.qj)({name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:8,message:"请输入2-8个汉字",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],phone:[{required:!0,message:"请输入电话(11位数字)",trigger:"blur"},{type:"number",message:"请输入电话(11位数字)"}],detailAddress:[{required:!0,message:"请输入地址",trigger:"blur"}]}),i=(0,M.iH)(null),d=(0,M.qj)({name:"",gender:"",phone:"",age:"18",address:"",detailAddress:""});function u(){e.value="按关键字搜索"===e.value?"":e.value}function c(){if(e.value=""===e.value?"按关键字搜索":e.value,"按关键字搜索"===e.value){t.splice(0);for(let e=0;e<l.length;e++)t.push(l[e])}else t.splice(0),l.forEach((n=>{-1==n.name.indexOf(e.value)&&-1==n.gender.indexOf(e.value)&&-1==String(n.age).indexOf(e.value)&&-1==n.address.indexOf(e.value)||t.push(n)})),0===t.length&&t.push(l[0])}function f(){R.T.confirm("信息尚未保存，是否确认关闭?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{n.value=!1,(0,T.z8)({type:"info",message:"已取消保存"})})).catch((()=>{}))}function p(e){const n=l.findIndex((n=>n.id===e));if(-1!=n){if(!1===l[n].allowDelete)return(0,F.bM)({title:"警告",message:"权限不够，禁止删除!",type:"warning",duration:1e3});x(JSON.stringify(l)),l.splice(n,1),g(),y(JSON.stringify(l))}}function m(){let e=[];l.forEach((n=>{n.ischecked&&e.push(n.id)}));const n=JSON.stringify(l);for(let t=0;t<e.length;t++){const n=l.findIndex((n=>n.id===e[t]));if(!1===l[n].allowDelete)return(0,F.bM)({title:"警告",message:"权限不够，禁止删除张三!",type:"warning",duration:1e3});l.splice(n,1)}x(n),g(),y(JSON.stringify(l))}function g(){let e=1;l.forEach(((n,t)=>{l[t].id=e,e++}))}function h(){const e=JSON.parse(localStorage.getItem("OLDUSERSINFO"));x(JSON.stringify(l)),l.splice(0);for(let n=0;n<e.length;n++)l.push(e[n]);y(JSON.stringify(l))}async function v(){if(i)try{i.value.validate((e=>{if(!e)return!1;{const e=l.findIndex((e=>e.id===r.value));if(-1==e){const e={};e.id=o.value,e.ischecked=!1,e.name=d.name,e.gender=d.gender,e.age=d.age,e.phone=d.phone,e.address=d.address+d.detailAddress;let n=_(e);if(n)return(0,T.z8)("相同信息已存在");e.id=o.value+1,x(JSON.stringify(l)),l.push(e),y(JSON.stringify(l))}else x(JSON.stringify(l)),l[e].name=d.name,l[e].gender=d.gender,l[e].phone=d.phone,l[e].address=d.address+d.detailAddress,y(JSON.stringify(l));n.value=!1,r.value=-1}}))}catch(e){return!1}}function b(e){if(e){const t=l.findIndex((n=>n.id===e));r.value=e,d.name=l[t].name,d.gender=l[t].gender,d.phone=l[t].phone,d.detailAddress=l[t].address,n.value=!0}else d.name="",d.gender="",d.phone="",d.detailAddress="",n.value=!0}function _(e){let n=!1;return l.forEach((l=>{l.name===e.name&&l.address===e.address&&l.phone===e.phone&&(n=!0)})),n}function y(e){localStorage.setItem("NEWUSERSINFO",e)}function x(e){localStorage.setItem("OLDUSERSINFO",e)}const w={expandTrigger:"hover"},O=e=>{let n="";e.forEach((e=>{n+=e})),d.address=n},S=[{value:"广东省",label:"广东省",children:[{value:"广州市",label:"广州市",children:[{value:"番禺区",label:"番禺区"},{value:"越秀区",label:"越秀区"},{value:"海珠区",label:"海珠区"},{value:"天河区",label:"天河区"},{value:"白云区",label:"白云区"},{value:"荔湾区",label:"荔湾区"}]}]}];return(0,a.YP)(l,(()=>{c()})),(0,a.bv)((()=>{if(x(JSON.stringify(l)),localStorage.getItem("NEWUSERSINFO")){const e=JSON.parse(localStorage.getItem("NEWUSERSINFO"));l.splice(0);for(let n=0;n<e.length;n++)l.push(e[n])}y(JSON.stringify(l)),c()})),{input:e,usersInfo:l,dialogVisible:n,form:d,hover:w,options:S,id:o,currentId:r,rules:s,formRef:i,usersInfoCopy:t,focus:u,blur:c,handleClose:f,deleteMore:m,handleChange:O,changeUsers:b,saveUsers:v,deleteUser:p,layout:h}}},Z=l(89);const P=(0,Z.Z)(B,[["render",H],["__scopeId","data-v-a6668e74"]]);var L=P,Y={name:"App",components:{Home:L}};const K=(0,Z.Z)(Y,[["render",o]]);var G=K,Q=l(5396);l(2834),l(4478);const X=(0,t.ri)(G);X.mount("#app"),X.use(Q.Z,{size:"small",zIndex:3e3})}},n={};function l(t){var a=n[t];if(void 0!==a)return a.exports;var o=n[t]={exports:{}};return e[t].call(o.exports,o,o.exports,l),o.exports}l.m=e,function(){var e=[];l.O=function(n,t,a,o){if(!t){var r=1/0;for(u=0;u<e.length;u++){t=e[u][0],a=e[u][1],o=e[u][2];for(var s=!0,i=0;i<t.length;i++)(!1&o||r>=o)&&Object.keys(l.O).every((function(e){return l.O[e](t[i])}))?t.splice(i--,1):(s=!1,o<r&&(r=o));if(s){e.splice(u--,1);var d=a();void 0!==d&&(n=d)}}return n}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[t,a,o]}}(),function(){l.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(n,{a:n}),n}}(),function(){l.d=function(e,n){for(var t in n)l.o(n,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};l.O.j=function(n){return 0===e[n]};var n=function(n,t){var a,o,r=t[0],s=t[1],i=t[2],d=0;if(r.some((function(n){return 0!==e[n]}))){for(a in s)l.o(s,a)&&(l.m[a]=s[a]);if(i)var u=i(l)}for(n&&n(t);d<r.length;d++)o=r[d],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(u)},t=self["webpackChunkdemo_crud_users"]=self["webpackChunkdemo_crud_users"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=l.O(void 0,[998],(function(){return l(3135)}));t=l.O(t)})();
//# sourceMappingURL=app.4cbfe3e5.js.map